{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cacma\\\\Downloads\\\\foodie-express-1\\\\foodie-express-v2\\\\foodie-express\\\\foodie-express-frontend\\\\src\\\\StaffPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useAuth } from './AuthContext';\nimport { useSocket } from './SocketContext';\nimport { getAllOrdersForStaff, updateOrderStatus, getConversationsForStaff, getConversationMessages, markConversationRead } from './api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Badge({\n  children\n}) {\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    style: {\n      background: '#111827',\n      color: 'white',\n      padding: '2px 8px',\n      borderRadius: 999,\n      fontSize: 12\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 7,\n    columnNumber: 10\n  }, this);\n}\n_c = Badge;\nexport default function StaffPanel() {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const role = (user === null || user === void 0 ? void 0 : user.role) || 'customer';\n  const {\n    socket,\n    connected\n  } = useSocket();\n  const [tab, setTab] = useState('orders');\n  const [statusFilter, setStatusFilter] = useState('pending');\n  const [orders, setOrders] = useState([]);\n  const [loadingOrders, setLoadingOrders] = useState(false);\n  const [convs, setConvs] = useState([]);\n  const [activeConvId, setActiveConvId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [msgText, setMsgText] = useState('');\n  const loadOrders = async () => {\n    setLoadingOrders(true);\n    try {\n      const data = await getAllOrdersForStaff(statusFilter === 'all' ? undefined : statusFilter);\n      setOrders(Array.isArray(data) ? data : []);\n    } catch (e) {\n      console.error(e);\n      alert(e.message || 'Không lấy được đơn');\n    } finally {\n      setLoadingOrders(false);\n    }\n  };\n  const loadConversations = async () => {\n    try {\n      const data = await getConversationsForStaff('open');\n      setConvs(Array.isArray(data) ? data : []);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n  const openConversation = async cid => {\n    setActiveConvId(cid);\n    try {\n      const data = await getConversationMessages(cid);\n      setMessages(data.messages || []);\n      await markConversationRead(cid);\n      if (socket && connected) socket.emit('conv:join', cid);\n    } catch (e) {\n      console.error(e);\n      alert(e.message || 'Không mở được chat');\n    }\n  };\n  useEffect(() => {\n    loadOrders();\n    loadConversations();\n    // eslint-disable-next-line\n  }, []);\n  useEffect(() => {\n    loadOrders();\n    // eslint-disable-next-line\n  }, [statusFilter]);\n\n  // Realtime: orders\n  useEffect(() => {\n    if (!socket || !connected) return;\n    const onNew = () => loadOrders();\n    const onUpdated = () => loadOrders();\n    socket.on('order:new', onNew);\n    socket.on('order:updated', onUpdated);\n    return () => {\n      socket.off('order:new', onNew);\n      socket.off('order:updated', onUpdated);\n    };\n    // eslint-disable-next-line\n  }, [socket, connected, statusFilter]);\n\n  // Realtime: inbox updates + messages\n  useEffect(() => {\n    if (!socket || !connected) return;\n    const onInbox = () => loadConversations();\n    const onMsg = m => {\n      if (activeConvId && String(m.conversationId) === String(activeConvId)) {\n        setMessages(prev => [...prev, m]);\n      }\n      loadConversations();\n    };\n    socket.on('chat:inbox_update', onInbox);\n    socket.on('chat:message', onMsg);\n    return () => {\n      socket.off('chat:inbox_update', onInbox);\n      socket.off('chat:message', onMsg);\n    };\n    // eslint-disable-next-line\n  }, [socket, connected, activeConvId]);\n  const sendMessage = () => {\n    const t = msgText.trim();\n    if (!t || !socket) return;\n    setMsgText('');\n    socket.emit('chat:send', {\n      conversationId: activeConvId,\n      text: t\n    }, ack => {\n      if (!(ack !== null && ack !== void 0 && ack.ok)) alert((ack === null || ack === void 0 ? void 0 : ack.message) || 'Gửi thất bại');\n    });\n  };\n  const changeStatus = async (orderId, status) => {\n    try {\n      await updateOrderStatus(orderId, status);\n      // realtime handled by server\n    } catch (e) {\n      console.error(e);\n      alert(e.message || 'Không cập nhật được');\n    }\n  };\n  const title = role === 'admin' ? 'Admin Panel' : 'Support Panel';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    style: {\n      padding: 16,\n      maxWidth: 1100\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center justify-content-between\",\n      style: {\n        gap: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          margin: 0\n        },\n        children: [title, \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginLeft: 8\n          },\n          children: connected ? /*#__PURE__*/_jsxDEV(Badge, {\n            children: \"LIVE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 88\n          }, this) : /*#__PURE__*/_jsxDEV(Badge, {\n            children: \"OFFLINE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 110\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 43\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn btn-sm ${tab === 'orders' ? 'btn-dark' : 'btn-outline-dark'}`,\n          onClick: () => setTab('orders'),\n          children: \"\\u0110\\u01A1n h\\xE0ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `btn btn-sm ${tab === 'chat' ? 'btn-dark' : 'btn-outline-dark'}`,\n          onClick: () => setTab('chat'),\n          children: \"Chat h\\u1ED7 tr\\u1EE3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), tab === 'orders' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex\",\n        style: {\n          gap: 10,\n          alignItems: 'center',\n          flexWrap: 'wrap'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Filter:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"form-select form-select-sm\",\n          style: {\n            width: 220\n          },\n          value: statusFilter,\n          onChange: e => setStatusFilter(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"pending\",\n            children: \"Ch\\u1EDD x\\xE1c nh\\u1EADn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"confirmed\",\n            children: \"\\u0110\\xE3 x\\xE1c nh\\u1EADn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"preparing\",\n            children: \"\\u0110ang chu\\u1EA9n b\\u1ECB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"delivering\",\n            children: \"\\u0110ang giao\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"delivered\",\n            children: \"\\u0110\\xE3 giao\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"cancelled\",\n            children: \"\\u0110\\xE3 hu\\u1EF7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"all\",\n            children: \"T\\u1EA5t c\\u1EA3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-sm btn-outline-secondary\",\n          onClick: loadOrders,\n          disabled: loadingOrders,\n          children: \"Reload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-responsive\",\n        style: {\n          marginTop: 12\n        },\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"table table-sm align-middle\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"M\\xE3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Kh\\xE1ch\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"T\\u1ED5ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Thanh to\\xE1n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Tr\\u1EA1ng th\\xE1i\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                style: {\n                  width: 220\n                },\n                children: \"C\\u1EADp nh\\u1EADt\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [orders.map(o => {\n              var _o$user, _o$user2;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  style: {\n                    fontFamily: 'monospace'\n                  },\n                  children: o._id.slice(-6)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: ((_o$user = o.user) === null || _o$user === void 0 ? void 0 : _o$user.name) || ((_o$user2 = o.user) === null || _o$user2 === void 0 ? void 0 : _o$user2.email) || '—'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [Math.round(o.finalPrice || o.totalPrice || 0).toLocaleString(), \" \\u0111\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: String(o.paymentMethod || 'cod').toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(Badge, {\n                    children: o.status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      display: 'flex',\n                      gap: 8\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"select\", {\n                      className: \"form-select form-select-sm\",\n                      defaultValue: o.status,\n                      onChange: e => changeStatus(o._id, e.target.value),\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"pending\",\n                        children: \"pending\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 174,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"confirmed\",\n                        children: \"confirmed\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 175,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"preparing\",\n                        children: \"preparing\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 176,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"delivering\",\n                        children: \"delivering\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 177,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"delivered\",\n                        children: \"delivered\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 178,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"cancelled\",\n                        children: \"cancelled\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 179,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 21\n                }, this)]\n              }, o._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 19\n              }, this);\n            }), orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: 6,\n                style: {\n                  color: '#6b7280'\n                },\n                children: \"Kh\\xF4ng c\\xF3 \\u0111\\u01A1n ph\\xF9 h\\u1EE3p.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 19\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }, this) : null, tab === 'chat' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 16,\n        display: 'grid',\n        gridTemplateColumns: '320px 1fr',\n        gap: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          borderRadius: 16\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex align-items-center justify-content-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"H\\u1ED9p th\\u01B0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-sm btn-outline-secondary\",\n              onClick: loadConversations,\n              children: \"Reload\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 10,\n              maxHeight: 520,\n              overflow: 'auto'\n            },\n            children: [convs.map(c => {\n              var _c$customerId, _c$customerId2;\n              return /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => openConversation(c._id),\n                className: `btn w-100 text-start ${activeConvId === c._id ? 'btn-dark' : 'btn-outline-dark'}`,\n                style: {\n                  marginBottom: 8,\n                  borderRadius: 14\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontWeight: 600\n                  },\n                  children: ((_c$customerId = c.customerId) === null || _c$customerId === void 0 ? void 0 : _c$customerId.name) || ((_c$customerId2 = c.customerId) === null || _c$customerId2 === void 0 ? void 0 : _c$customerId2.email) || 'Khách'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: 12,\n                    opacity: 0.8\n                  },\n                  children: [\"Unread: \", c.unreadBySupport || 0, \" \\u2022 \", new Date(c.lastMessageAt).toLocaleString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 21\n                }, this)]\n              }, c._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 19\n              }, this);\n            }), convs.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: '#6b7280'\n              },\n              children: \"Ch\\u01B0a c\\xF3 cu\\u1ED9c chat.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 39\n            }, this) : null]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        style: {\n          borderRadius: 16\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            height: 600\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex align-items-center justify-content-between\",\n            style: {\n              marginBottom: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"\\u0110ang chat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: 12,\n                color: '#6b7280'\n              },\n              children: activeConvId ? activeConvId : 'Chọn 1 cuộc chat bên trái'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1,\n              overflow: 'auto',\n              padding: 8,\n              background: '#f8fafc',\n              borderRadius: 14\n            },\n            children: messages.map(m => /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                marginBottom: 10,\n                display: 'flex',\n                justifyContent: m.senderRole === 'customer' ? 'flex-start' : 'flex-end'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  maxWidth: '70%',\n                  background: 'white',\n                  borderRadius: 14,\n                  padding: '8px 10px',\n                  boxShadow: '0 1px 6px rgba(0,0,0,.06)'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: 12,\n                    opacity: 0.7,\n                    marginBottom: 2\n                  },\n                  children: [m.senderRole, \" \\u2022 \", new Date(m.createdAt).toLocaleTimeString([], {\n                    hour: '2-digit',\n                    minute: '2-digit'\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: m.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 21\n              }, this)\n            }, m._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: 8,\n              marginTop: 10\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-control\",\n              value: msgText,\n              onChange: e => setMsgText(e.target.value),\n              placeholder: \"Nh\\u1EADp tin nh\\u1EAFn...\",\n              onKeyDown: e => {\n                if (e.key === 'Enter') sendMessage();\n              },\n              disabled: !activeConvId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-dark\",\n              onClick: sendMessage,\n              disabled: !activeConvId,\n              children: \"G\\u1EEDi\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n}\n_s(StaffPanel, \"zQGSvtlmz0oJveyfn/kpT7+ZP0M=\", false, function () {\n  return [useAuth, useSocket];\n});\n_c2 = StaffPanel;\nvar _c, _c2;\n$RefreshReg$(_c, \"Badge\");\n$RefreshReg$(_c2, \"StaffPanel\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","useAuth","useSocket","getAllOrdersForStaff","updateOrderStatus","getConversationsForStaff","getConversationMessages","markConversationRead","jsxDEV","_jsxDEV","Badge","children","style","background","color","padding","borderRadius","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","_c","StaffPanel","_s","user","role","socket","connected","tab","setTab","statusFilter","setStatusFilter","orders","setOrders","loadingOrders","setLoadingOrders","convs","setConvs","activeConvId","setActiveConvId","messages","setMessages","msgText","setMsgText","loadOrders","data","undefined","Array","isArray","e","console","error","alert","message","loadConversations","openConversation","cid","emit","onNew","onUpdated","on","off","onInbox","onMsg","m","String","conversationId","prev","sendMessage","t","trim","text","ack","ok","changeStatus","orderId","status","title","className","maxWidth","gap","margin","marginLeft","display","onClick","marginTop","alignItems","flexWrap","width","value","onChange","target","disabled","map","o","_o$user","_o$user2","fontFamily","_id","slice","name","email","Math","round","finalPrice","totalPrice","toLocaleString","paymentMethod","toUpperCase","defaultValue","length","colSpan","gridTemplateColumns","maxHeight","overflow","c","_c$customerId","_c$customerId2","marginBottom","fontWeight","customerId","opacity","unreadBySupport","Date","lastMessageAt","flexDirection","height","flex","justifyContent","senderRole","boxShadow","createdAt","toLocaleTimeString","hour","minute","placeholder","onKeyDown","key","_c2","$RefreshReg$"],"sources":["C:/Users/cacma/Downloads/foodie-express-1/foodie-express-v2/foodie-express/foodie-express-frontend/src/StaffPanel.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\nimport { useAuth } from './AuthContext';\nimport { useSocket } from './SocketContext';\nimport { getAllOrdersForStaff, updateOrderStatus, getConversationsForStaff, getConversationMessages, markConversationRead } from './api';\n\nfunction Badge({ children }) {\n  return <span style={{ background: '#111827', color: 'white', padding: '2px 8px', borderRadius: 999, fontSize: 12 }}>{children}</span>;\n}\n\nexport default function StaffPanel() {\n  const { user } = useAuth();\n  const role = user?.role || 'customer';\n  const { socket, connected } = useSocket();\n\n  const [tab, setTab] = useState('orders');\n  const [statusFilter, setStatusFilter] = useState('pending');\n  const [orders, setOrders] = useState([]);\n  const [loadingOrders, setLoadingOrders] = useState(false);\n\n  const [convs, setConvs] = useState([]);\n  const [activeConvId, setActiveConvId] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [msgText, setMsgText] = useState('');\n\n  const loadOrders = async () => {\n    setLoadingOrders(true);\n    try {\n      const data = await getAllOrdersForStaff(statusFilter === 'all' ? undefined : statusFilter);\n      setOrders(Array.isArray(data) ? data : []);\n    } catch (e) {\n      console.error(e);\n      alert(e.message || 'Không lấy được đơn');\n    } finally {\n      setLoadingOrders(false);\n    }\n  };\n\n  const loadConversations = async () => {\n    try {\n      const data = await getConversationsForStaff('open');\n      setConvs(Array.isArray(data) ? data : []);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const openConversation = async (cid) => {\n    setActiveConvId(cid);\n    try {\n      const data = await getConversationMessages(cid);\n      setMessages(data.messages || []);\n      await markConversationRead(cid);\n      if (socket && connected) socket.emit('conv:join', cid);\n    } catch (e) {\n      console.error(e);\n      alert(e.message || 'Không mở được chat');\n    }\n  };\n\n  useEffect(() => {\n    loadOrders();\n    loadConversations();\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    loadOrders();\n    // eslint-disable-next-line\n  }, [statusFilter]);\n\n  // Realtime: orders\n  useEffect(() => {\n    if (!socket || !connected) return;\n    const onNew = () => loadOrders();\n    const onUpdated = () => loadOrders();\n    socket.on('order:new', onNew);\n    socket.on('order:updated', onUpdated);\n    return () => {\n      socket.off('order:new', onNew);\n      socket.off('order:updated', onUpdated);\n    };\n    // eslint-disable-next-line\n  }, [socket, connected, statusFilter]);\n\n  // Realtime: inbox updates + messages\n  useEffect(() => {\n    if (!socket || !connected) return;\n    const onInbox = () => loadConversations();\n    const onMsg = (m) => {\n      if (activeConvId && String(m.conversationId) === String(activeConvId)) {\n        setMessages((prev) => [...prev, m]);\n      }\n      loadConversations();\n    };\n    socket.on('chat:inbox_update', onInbox);\n    socket.on('chat:message', onMsg);\n    return () => {\n      socket.off('chat:inbox_update', onInbox);\n      socket.off('chat:message', onMsg);\n    };\n    // eslint-disable-next-line\n  }, [socket, connected, activeConvId]);\n\n  const sendMessage = () => {\n    const t = msgText.trim();\n    if (!t || !socket) return;\n    setMsgText('');\n    socket.emit('chat:send', { conversationId: activeConvId, text: t }, (ack) => {\n      if (!ack?.ok) alert(ack?.message || 'Gửi thất bại');\n    });\n  };\n\n  const changeStatus = async (orderId, status) => {\n    try {\n      await updateOrderStatus(orderId, status);\n      // realtime handled by server\n    } catch (e) {\n      console.error(e);\n      alert(e.message || 'Không cập nhật được');\n    }\n  };\n\n  const title = role === 'admin' ? 'Admin Panel' : 'Support Panel';\n\n  return (\n    <div className=\"container\" style={{ padding: 16, maxWidth: 1100 }}>\n      <div className=\"d-flex align-items-center justify-content-between\" style={{ gap: 12 }}>\n        <h3 style={{ margin: 0 }}>{title} <span style={{ marginLeft: 8 }}>{connected ? <Badge>LIVE</Badge> : <Badge>OFFLINE</Badge>}</span></h3>\n        <div style={{ display: 'flex', gap: 8 }}>\n          <button className={`btn btn-sm ${tab === 'orders' ? 'btn-dark' : 'btn-outline-dark'}`} onClick={() => setTab('orders')}>Đơn hàng</button>\n          <button className={`btn btn-sm ${tab === 'chat' ? 'btn-dark' : 'btn-outline-dark'}`} onClick={() => setTab('chat')}>Chat hỗ trợ</button>\n        </div>\n      </div>\n\n      {tab === 'orders' ? (\n        <div style={{ marginTop: 16 }}>\n          <div className=\"d-flex\" style={{ gap: 10, alignItems: 'center', flexWrap: 'wrap' }}>\n            <b>Filter:</b>\n            <select className=\"form-select form-select-sm\" style={{ width: 220 }} value={statusFilter} onChange={(e) => setStatusFilter(e.target.value)}>\n              <option value=\"pending\">Chờ xác nhận</option>\n              <option value=\"confirmed\">Đã xác nhận</option>\n              <option value=\"preparing\">Đang chuẩn bị</option>\n              <option value=\"delivering\">Đang giao</option>\n              <option value=\"delivered\">Đã giao</option>\n              <option value=\"cancelled\">Đã huỷ</option>\n              <option value=\"all\">Tất cả</option>\n            </select>\n            <button className=\"btn btn-sm btn-outline-secondary\" onClick={loadOrders} disabled={loadingOrders}>Reload</button>\n          </div>\n\n          <div className=\"table-responsive\" style={{ marginTop: 12 }}>\n            <table className=\"table table-sm align-middle\">\n              <thead>\n                <tr>\n                  <th>Mã</th>\n                  <th>Khách</th>\n                  <th>Tổng</th>\n                  <th>Thanh toán</th>\n                  <th>Trạng thái</th>\n                  <th style={{ width: 220 }}>Cập nhật</th>\n                </tr>\n              </thead>\n              <tbody>\n                {orders.map((o) => (\n                  <tr key={o._id}>\n                    <td style={{ fontFamily: 'monospace' }}>{o._id.slice(-6)}</td>\n                    <td>{o.user?.name || o.user?.email || '—'}</td>\n                    <td>{Math.round(o.finalPrice || o.totalPrice || 0).toLocaleString()} đ</td>\n                    <td>{String(o.paymentMethod || 'cod').toUpperCase()}</td>\n                    <td><Badge>{o.status}</Badge></td>\n                    <td>\n                      <div style={{ display: 'flex', gap: 8 }}>\n                        <select className=\"form-select form-select-sm\" defaultValue={o.status} onChange={(e) => changeStatus(o._id, e.target.value)}>\n                          <option value=\"pending\">pending</option>\n                          <option value=\"confirmed\">confirmed</option>\n                          <option value=\"preparing\">preparing</option>\n                          <option value=\"delivering\">delivering</option>\n                          <option value=\"delivered\">delivered</option>\n                          <option value=\"cancelled\">cancelled</option>\n                        </select>\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n                {orders.length === 0 ? (\n                  <tr><td colSpan={6} style={{ color: '#6b7280' }}>Không có đơn phù hợp.</td></tr>\n                ) : null}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      ) : null}\n\n      {tab === 'chat' ? (\n        <div style={{ marginTop: 16, display: 'grid', gridTemplateColumns: '320px 1fr', gap: 12 }}>\n          <div className=\"card\" style={{ borderRadius: 16 }}>\n            <div className=\"card-body\">\n              <div className=\"d-flex align-items-center justify-content-between\">\n                <b>Hộp thư</b>\n                <button className=\"btn btn-sm btn-outline-secondary\" onClick={loadConversations}>Reload</button>\n              </div>\n              <div style={{ marginTop: 10, maxHeight: 520, overflow: 'auto' }}>\n                {convs.map((c) => (\n                  <button\n                    key={c._id}\n                    onClick={() => openConversation(c._id)}\n                    className={`btn w-100 text-start ${activeConvId === c._id ? 'btn-dark' : 'btn-outline-dark'}`}\n                    style={{ marginBottom: 8, borderRadius: 14 }}\n                  >\n                    <div style={{ fontWeight: 600 }}>{c.customerId?.name || c.customerId?.email || 'Khách'}</div>\n                    <div style={{ fontSize: 12, opacity: 0.8 }}>Unread: {c.unreadBySupport || 0} • {new Date(c.lastMessageAt).toLocaleString()}</div>\n                  </button>\n                ))}\n                {convs.length === 0 ? <div style={{ color: '#6b7280' }}>Chưa có cuộc chat.</div> : null}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"card\" style={{ borderRadius: 16 }}>\n            <div className=\"card-body\" style={{ display: 'flex', flexDirection: 'column', height: 600 }}>\n              <div className=\"d-flex align-items-center justify-content-between\" style={{ marginBottom: 8 }}>\n                <b>Đang chat</b>\n                <span style={{ fontSize: 12, color: '#6b7280' }}>{activeConvId ? activeConvId : 'Chọn 1 cuộc chat bên trái'}</span>\n              </div>\n              <div style={{ flex: 1, overflow: 'auto', padding: 8, background: '#f8fafc', borderRadius: 14 }}>\n                {messages.map((m) => (\n                  <div key={m._id} style={{ marginBottom: 10, display: 'flex', justifyContent: m.senderRole === 'customer' ? 'flex-start' : 'flex-end' }}>\n                    <div style={{ maxWidth: '70%', background: 'white', borderRadius: 14, padding: '8px 10px', boxShadow: '0 1px 6px rgba(0,0,0,.06)' }}>\n                      <div style={{ fontSize: 12, opacity: 0.7, marginBottom: 2 }}>{m.senderRole} • {new Date(m.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</div>\n                      <div>{m.text}</div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              <div style={{ display: 'flex', gap: 8, marginTop: 10 }}>\n                <input className=\"form-control\" value={msgText} onChange={(e) => setMsgText(e.target.value)} placeholder=\"Nhập tin nhắn...\" onKeyDown={(e) => { if (e.key === 'Enter') sendMessage(); }} disabled={!activeConvId} />\n                <button className=\"btn btn-dark\" onClick={sendMessage} disabled={!activeConvId}>Gửi</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}