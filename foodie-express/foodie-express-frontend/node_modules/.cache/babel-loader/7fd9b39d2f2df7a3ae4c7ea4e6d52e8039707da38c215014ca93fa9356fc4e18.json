{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cacma\\\\Downloads\\\\foodie-express\\\\foodie-express\\\\foodie-express-frontend\\\\src\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/AuthContext.js\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { loginUser, registerUser, socialLogin as socialLoginApi } from \"./api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport default function AuthProvider({\n  children\n}) {\n  _s2();\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    const u = localStorage.getItem(\"user\");\n    if (u) setUser(JSON.parse(u));\n  }, []);\n  const saveSession = data => {\n    localStorage.setItem(\"token\", data.token);\n    localStorage.setItem(\"user\", JSON.stringify(data.user));\n    setUser(data.user);\n  };\n  const login = async (email, password, cb) => {\n    try {\n      const data = await loginUser({\n        email,\n        password\n      }); // ✅ đúng kiểu\n      saveSession(data);\n      cb === null || cb === void 0 ? void 0 : cb();\n    } catch (err) {\n      console.error(err);\n      alert(err.message || \"Đăng nhập thất bại\");\n    }\n  };\n  const register = async (name, email, password, cb) => {\n    try {\n      const data = await registerUser({\n        name,\n        email,\n        password\n      }); // ✅ đúng kiểu\n      saveSession(data);\n      cb === null || cb === void 0 ? void 0 : cb();\n    } catch (err) {\n      console.error(err);\n      alert(err.message || \"Đăng ký thất bại\");\n    }\n  };\n  const socialLogin = async (idToken, cb) => {\n    try {\n      const data = await socialLoginApi(idToken);\n      saveSession(data);\n      cb === null || cb === void 0 ? void 0 : cb();\n    } catch (err) {\n      console.error(err);\n      alert(err.message || \"Đăng nhập Google thất bại\");\n    }\n  };\n  const logout = () => {\n    localStorage.clear();\n    setUser(null);\n    window.location.href = \"/\";\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      login,\n      register,\n      socialLogin,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s2(AuthProvider, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","loginUser","registerUser","socialLogin","socialLoginApi","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","AuthProvider","children","_s2","user","setUser","u","localStorage","getItem","JSON","parse","saveSession","data","setItem","token","stringify","login","email","password","cb","err","console","error","alert","message","register","name","idToken","logout","clear","window","location","href","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/cacma/Downloads/foodie-express/foodie-express/foodie-express-frontend/src/AuthContext.js"],"sourcesContent":["// src/AuthContext.js\r\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\r\nimport {\r\n  loginUser,\r\n  registerUser,\r\n  socialLogin as socialLoginApi,\r\n} from \"./api\";\r\n\r\nconst AuthContext = createContext(null);\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport default function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const u = localStorage.getItem(\"user\");\r\n    if (u) setUser(JSON.parse(u));\r\n  }, []);\r\n\r\n  const saveSession = (data) => {\r\n    localStorage.setItem(\"token\", data.token);\r\n    localStorage.setItem(\"user\", JSON.stringify(data.user));\r\n    setUser(data.user);\r\n  };\r\n\r\n  const login = async (email, password, cb) => {\r\n    try {\r\n      const data = await loginUser({ email, password }); // ✅ đúng kiểu\r\n      saveSession(data);\r\n      cb?.();\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(err.message || \"Đăng nhập thất bại\");\r\n    }\r\n  };\r\n\r\n  const register = async (name, email, password, cb) => {\r\n    try {\r\n      const data = await registerUser({ name, email, password }); // ✅ đúng kiểu\r\n      saveSession(data);\r\n      cb?.();\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(err.message || \"Đăng ký thất bại\");\r\n    }\r\n  };\r\n\r\n  const socialLogin = async (idToken, cb) => {\r\n    try {\r\n      const data = await socialLoginApi(idToken);\r\n      saveSession(data);\r\n      cb?.();\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(err.message || \"Đăng nhập Google thất bại\");\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.clear();\r\n    setUser(null);\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, register, socialLogin, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}